{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wangwei/Documents/ssr-project/react-next-ssr/pages/_app.js\";\nimport App, { Container } from 'next/app';\nimport React from 'react';\nimport { Provider } from 'react-redux';\nimport withRedux from 'next-redux-wrapper';\nimport withReduxSaga from 'next-redux-saga';\nimport { ServerStyleSheet } from 'styled-components';\nimport createStore from '../store';\n\nvar MyApp =\n/*#__PURE__*/\nfunction (_App) {\n  _inherits(MyApp, _App);\n\n  function MyApp() {\n    _classCallCheck(this, MyApp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MyApp).apply(this, arguments));\n  }\n\n  _createClass(MyApp, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          Component = _this$props.Component,\n          pageProps = _this$props.pageProps,\n          store = _this$props.store;\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(Provider, {\n        store: store,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(Component, _extends({}, pageProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var Component, ctx, sheet, originalRenderPage, props, _ctx$req, locale, localeDataScript, pageProps;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Component = _ref.Component, ctx = _ref.ctx;\n                sheet = new ServerStyleSheet();\n                originalRenderPage = ctx.renderPage;\n\n                ctx.renderPage = function () {\n                  return originalRenderPage({\n                    enhanceApp: function enhanceApp(App) {\n                      return function (props) {\n                        return sheet.collectStyles(React.createElement(App, _extends({}, props, {\n                          __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 14\n                          },\n                          __self: this\n                        })));\n                      };\n                    }\n                  });\n                };\n\n                _context.next = 6;\n                return Component.getInitialProps({\n                  ctx: ctx\n                });\n\n              case 6:\n                props = _context.sent;\n                _ctx$req = ctx.req, locale = _ctx$req.locale, localeDataScript = _ctx$req.localeDataScript;\n                pageProps = {} // ...props,\n                // styles: [\n                //   ...props.styles,\n                //   ...sheet.getStyleElement()\n                // ],\n                // locale,\n                // localeDataScript\n                // if (Component.getInitialProps) {\n                //   pageProps = await Component.getInitialProps({ ctx })\n                // }\n                ;\n                pageProps.styles = [].concat(_toConsumableArray(props.styles), _toConsumableArray(sheet.getStyleElement()));\n                return _context.abrupt(\"return\", {\n                  pageProps: pageProps\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return MyApp;\n}(App);\n\nexport default withRedux(createStore)(withReduxSaga(MyApp));","map":{"version":3,"sources":["/Users/wangwei/Documents/ssr-project/react-next-ssr/pages/_app.js"],"names":["App","Container","React","Provider","withRedux","withReduxSaga","ServerStyleSheet","createStore","MyApp","props","Component","pageProps","store","ctx","sheet","originalRenderPage","renderPage","enhanceApp","collectStyles","getInitialProps","req","locale","localeDataScript","styles","getStyleElement"],"mappings":";;;;;;;;;;AAAA,OAAOA,GAAP,IAAcC,SAAd,QAA+B,UAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,gBAAT,QAAiC,mBAAjC;AACA,OAAOC,WAAP,MAAwB,UAAxB;;IAEMC,K;;;;;;;;;;;;;6BA4BM;AAAA,wBACgC,KAAKC,KADrC;AAAA,UACAC,SADA,eACAA,SADA;AAAA,UACWC,SADX,eACWA,SADX;AAAA,UACsBC,KADtB,eACsBA,KADtB;AAER,aACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,QAAD;AAAU,QAAA,KAAK,EAAEA,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD,eAAeD,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,CADF,CADF;AAOD;;;;;;;;;;;;;AApC+BD,gBAAAA,S,QAAAA,S,EAAWG,G,QAAAA,G;AACnCC,gBAAAA,K,GAAQ,IAAIR,gBAAJ,E;AACRS,gBAAAA,kB,GAAqBF,GAAG,CAACG,U;;AAC/BH,gBAAAA,GAAG,CAACG,UAAJ,GAAiB;AAAA,yBAAMD,kBAAkB,CAAC;AACxCE,oBAAAA,UAAU,EAAE,oBAAAjB,GAAG;AAAA,6BAAI,UAAAS,KAAK;AAAA,+BAAIK,KAAK,CAACI,aAAN,CAAoB,oBAAC,GAAD,eAAST,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAApB,CAAJ;AAAA,uBAAT;AAAA;AADyB,mBAAD,CAAxB;AAAA,iBAAjB;;;uBAGoBC,SAAS,CAACS,eAAV,CAA0B;AAAEN,kBAAAA,GAAG,EAAHA;AAAF,iBAA1B,C;;;AAAdJ,gBAAAA,K;2BACoCI,G,CAAnCO,G,EAAMC,M,YAAAA,M,EAAQC,gB,YAAAA,gB;AACjBX,gBAAAA,S,GAAY,E,CACd;AACA;AACA;AACA;AACA;AACA;AACA;AAEF;AACA;AACA;;AACAA,gBAAAA,SAAS,CAACY,MAAV,gCACKd,KAAK,CAACc,MADX,sBAEKT,KAAK,CAACU,eAAN,EAFL;iDAIO;AAAEb,kBAAAA,SAAS,EAATA;AAAF,iB;;;;;;;;;;;;;;;;;;;EAzBSX,G;;AAwCpB,eAAeI,SAAS,CAACG,WAAD,CAAT,CAAuBF,aAAa,CAACG,KAAD,CAApC,CAAf","sourcesContent":["import App, { Container } from 'next/app'\nimport React from 'react'\nimport { Provider } from 'react-redux'\nimport withRedux from 'next-redux-wrapper'\nimport withReduxSaga from 'next-redux-saga'\nimport { ServerStyleSheet } from 'styled-components'\nimport createStore from '../store'\n\nclass MyApp extends App {\n  static async getInitialProps ({ Component, ctx }) {\n    const sheet = new ServerStyleSheet()\n    const originalRenderPage = ctx.renderPage\n    ctx.renderPage = () => originalRenderPage({\n      enhanceApp: App => props => sheet.collectStyles(<App {...props} />)\n    })\n    const props = await Component.getInitialProps({ ctx })\n    const {req: {locale, localeDataScript}} = ctx\n    let pageProps = {\n      // ...props,\n      // styles: [\n      //   ...props.styles,\n      //   ...sheet.getStyleElement()\n      // ],\n      // locale,\n      // localeDataScript\n    }\n    // if (Component.getInitialProps) {\n    //   pageProps = await Component.getInitialProps({ ctx })\n    // }\n    pageProps.styles = [\n      ...props.styles,\n      ...sheet.getStyleElement()\n    ]\n    return { pageProps }\n  }\n\n  render () {\n    const { Component, pageProps, store } = this.props\n    return (\n      <Container>\n        <Provider store={store}>\n          <Component {...pageProps} />\n        </Provider>\n      </Container>\n    )\n  }\n}\n\nexport default withRedux(createStore)(withReduxSaga(MyApp))\n"]},"metadata":{},"sourceType":"module"}