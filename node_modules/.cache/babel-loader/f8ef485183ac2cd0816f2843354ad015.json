{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport axios from 'axios'; // import { message, notification } from 'antd';\n\n/**\n * 公用get请求\n * @param url       接口地址\n * @param msg       接口异常提示\n * @param headers   接口所需header配置\n */\n\nexport var get = function get(_ref) {\n  var url = _ref.url,\n      _ref$params = _ref.params,\n      params = _ref$params === void 0 ? {} : _ref$params,\n      _ref$restParams = _ref.restParams,\n      restParams = _ref$restParams === void 0 ? {} : _ref$restParams,\n      _ref$msg = _ref.msg,\n      msg = _ref$msg === void 0 ? '系统异常' : _ref$msg,\n      headers = _ref.headers;\n  return axios.get(_urlMixPram(restParams, url), {\n    params: params\n  }, headers).then(function (res) {\n    return res.data;\n  }).catch(function (err) {\n    console.log(err); // message.warn(msg);\n    // notification.warn({\n    //      message: msg,\n    //      className : 'react-no-print'\n    // })\n  });\n}; //function\n\nfunction _urlMixPram(parm, url) {\n  var _url = url;\n\n  for (var i in parm) {\n    _url = _url.replace('{' + i + '}', parm[i]);\n  }\n\n  return _url;\n}\n/**\n * 公用post请求\n * @param url       接口地址\n * @param data      接口参数\n * @param msg       接口异常提示\n * @param headers   接口所需header配置\n */\n\n\nexport var post = function post(_ref2) {\n  var url = _ref2.url,\n      data = _ref2.data,\n      _ref2$msg = _ref2.msg,\n      msg = _ref2$msg === void 0 ? '接口异常' : _ref2$msg,\n      headers = _ref2.headers;\n  return axios.post(url, data, headers).then(function (res) {\n    return res.data;\n  }).catch(function (err) {\n    console.log(err); // message.warn(msg);\n  });\n};\n/**\n * 公用文件导出form请求\n * @param url       接口地址\n * @param data      接口参数\n */\n\nexport var postExport = function postExport(_ref3) {\n  var url = _ref3.url,\n      data = _ref3.data;\n  return new _Promise(function (resolve, reject) {\n    window.open(markUrl(url, data));\n    return;\n    var iframe = document.createElement(\"iframe\");\n    iframe.setAttribute('id', 'iframe_display');\n    iframe.setAttribute('name', 'iframe_display');\n    iframe.setAttribute('style', 'display:none');\n    document.querySelector('.container').appendChild(iframe);\n    var form = document.createElement(\"form\");\n    form.setAttribute('id', 'form1123');\n    form.setAttribute('target', 'iframe_display');\n    form.setAttribute('method', 'post');\n    form.setAttribute('action', markUrl(url, data));\n    document.querySelector('.container').appendChild(form);\n    form.submit();\n    form.remove();\n    var parent = document.querySelector('.container');\n    var iframe1 = document.getElementById(\"iframe_display\");\n    setTimeout(function () {\n      resolve({\n        code: 200\n      });\n      removeElement(iframe1);\n    }, 300000);\n  });\n};\n\nfunction removeElement(_element) {\n  var _parentElement = _element.parentNode;\n\n  if (_parentElement) {\n    _parentElement.removeChild(_element);\n  }\n}\n\nfunction markUrl(link, data) {\n  if (typeof data != \"undefined\" && data != \"\") {\n    var paramArr = [];\n\n    for (var attr in data) {\n      paramArr.push(attr + '=' + data[attr]);\n    }\n\n    link += '?' + paramArr.join('&');\n  }\n\n  return link;\n}","map":{"version":3,"sources":["/Users/wangwei/Documents/ssr-project/react-next-ssr/axios/tools.js"],"names":["axios","get","url","params","restParams","msg","headers","_urlMixPram","then","res","data","catch","err","console","log","parm","_url","i","replace","post","postExport","resolve","reject","window","open","markUrl","iframe","document","createElement","setAttribute","querySelector","appendChild","form","submit","remove","parent","iframe1","getElementById","setTimeout","code","removeElement","_element","_parentElement","parentNode","removeChild","link","paramArr","attr","push","join"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AAEA;;;;;;;AAMA,OAAO,IAAMC,GAAG,GAAG,SAANA,GAAM;AAAA,MAAEC,GAAF,QAAEA,GAAF;AAAA,yBAAMC,MAAN;AAAA,MAAMA,MAAN,4BAAa,EAAb;AAAA,6BAAgBC,UAAhB;AAAA,MAAgBA,UAAhB,gCAA2B,EAA3B;AAAA,sBAA+BC,GAA/B;AAAA,MAA+BA,GAA/B,yBAAqC,MAArC;AAAA,MAA6CC,OAA7C,QAA6CA,OAA7C;AAAA,SACfN,KAAK,CAACC,GAAN,CAAUM,WAAW,CAACH,UAAD,EAAYF,GAAZ,CAArB,EAAuC;AAACC,IAAAA,MAAM,EAANA;AAAD,GAAvC,EAAgDG,OAAhD,EAAyDE,IAAzD,CAA8D,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAR;AAAA,GAAjE,EAA+EC,KAA/E,CAAqF,UAAAC,GAAG,EAAI;AACzFC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,EADyF,CAEzF;AACA;AACA;AACA;AACA;AACF,GAPD,CADe;AAAA,CAAZ,C,CASP;;AACA,SAASL,WAAT,CAAqBQ,IAArB,EAA0Bb,GAA1B,EAA8B;AAC1B,MAAIc,IAAI,GAACd,GAAT;;AACA,OAAI,IAAIe,CAAR,IAAaF,IAAb,EAAkB;AACdC,IAAAA,IAAI,GAACA,IAAI,CAACE,OAAL,CAAa,MAAID,CAAJ,GAAM,GAAnB,EAAuBF,IAAI,CAACE,CAAD,CAA3B,CAAL;AACH;;AACD,SAAOD,IAAP;AACH;AACD;;;;;;;;;AAOA,OAAO,IAAMG,IAAI,GAAG,SAAPA,IAAO;AAAA,MAAEjB,GAAF,SAAEA,GAAF;AAAA,MAAOQ,IAAP,SAAOA,IAAP;AAAA,wBAAaL,GAAb;AAAA,MAAaA,GAAb,0BAAmB,MAAnB;AAAA,MAA2BC,OAA3B,SAA2BA,OAA3B;AAAA,SAChBN,KAAK,CAACmB,IAAN,CAAWjB,GAAX,EAAgBQ,IAAhB,EAAsBJ,OAAtB,EAA+BE,IAA/B,CAAoC,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAR;AAAA,GAAvC,EAAqDC,KAArD,CAA2D,UAAAC,GAAG,EAAI;AAC9DC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAD8D,CAE9D;AACH,GAHD,CADgB;AAAA,CAAb;AAMP;;;;;;AAMA,OAAO,IAAMQ,UAAU,GAAG,SAAbA,UAAa,QAAgB;AAAA,MAAdlB,GAAc,SAAdA,GAAc;AAAA,MAATQ,IAAS,SAATA,IAAS;AACtC,SAAO,aAAY,UAACW,OAAD,EAASC,MAAT,EAAkB;AACjCC,IAAAA,MAAM,CAACC,IAAP,CAAYC,OAAO,CAACvB,GAAD,EAAKQ,IAAL,CAAnB;AACA;AACA,QAAMgB,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAF,IAAAA,MAAM,CAACG,YAAP,CAAoB,IAApB,EAAyB,gBAAzB;AACAH,IAAAA,MAAM,CAACG,YAAP,CAAoB,MAApB,EAA2B,gBAA3B;AACAH,IAAAA,MAAM,CAACG,YAAP,CAAoB,OAApB,EAA4B,cAA5B;AACAF,IAAAA,QAAQ,CAACG,aAAT,CAAuB,YAAvB,EAAqCC,WAArC,CAAiDL,MAAjD;AACA,QAAMM,IAAI,GAAGL,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAb;AACAI,IAAAA,IAAI,CAACH,YAAL,CAAkB,IAAlB,EAAuB,UAAvB;AACAG,IAAAA,IAAI,CAACH,YAAL,CAAkB,QAAlB,EAA2B,gBAA3B;AACAG,IAAAA,IAAI,CAACH,YAAL,CAAkB,QAAlB,EAA2B,MAA3B;AACAG,IAAAA,IAAI,CAACH,YAAL,CAAkB,QAAlB,EAA2BJ,OAAO,CAACvB,GAAD,EAAKQ,IAAL,CAAlC;AACAiB,IAAAA,QAAQ,CAACG,aAAT,CAAuB,YAAvB,EAAqCC,WAArC,CAAiDC,IAAjD;AACAA,IAAAA,IAAI,CAACC,MAAL;AACAD,IAAAA,IAAI,CAACE,MAAL;AACA,QAAMC,MAAM,GAAGR,QAAQ,CAACG,aAAT,CAAuB,YAAvB,CAAf;AACA,QAAMM,OAAO,GAAGT,QAAQ,CAACU,cAAT,CAAwB,gBAAxB,CAAhB;AACAC,IAAAA,UAAU,CAAC,YAAI;AACXjB,MAAAA,OAAO,CAAC;AAACkB,QAAAA,IAAI,EAAC;AAAN,OAAD,CAAP;AACAC,MAAAA,aAAa,CAACJ,OAAD,CAAb;AACH,KAHS,EAGR,MAHQ,CAAV;AAIH,GAtBM,CAAP;AAwBH,CAzBM;;AA0BP,SAASI,aAAT,CAAuBC,QAAvB,EAAgC;AAC5B,MAAIC,cAAc,GAAGD,QAAQ,CAACE,UAA9B;;AACA,MAAGD,cAAH,EAAkB;AACdA,IAAAA,cAAc,CAACE,WAAf,CAA2BH,QAA3B;AACH;AACJ;;AACD,SAAShB,OAAT,CAAiBoB,IAAjB,EAAsBnC,IAAtB,EAA2B;AACvB,MAAI,OAAOA,IAAP,IAAe,WAAf,IAA8BA,IAAI,IAAI,EAA1C,EAA8C;AAC1C,QAAIoC,QAAQ,GAAG,EAAf;;AACA,SAAK,IAAIC,IAAT,IAAkBrC,IAAlB,EAAwB;AACpBoC,MAAAA,QAAQ,CAACE,IAAT,CAAcD,IAAI,GAAG,GAAP,GAAcrC,IAAI,CAACqC,IAAD,CAAhC;AACH;;AACDF,IAAAA,IAAI,IAAI,MAAMC,QAAQ,CAACG,IAAT,CAAc,GAAd,CAAd;AACH;;AACD,SAAOJ,IAAP;AACH","sourcesContent":["import axios from 'axios';\n// import { message, notification } from 'antd';\n\n/**\n * 公用get请求\n * @param url       接口地址\n * @param msg       接口异常提示\n * @param headers   接口所需header配置\n */\nexport const get = ({url,params={},restParams={}, msg = '系统异常', headers}) =>\n    axios.get(_urlMixPram(restParams,url), {params},headers).then(res => res.data).catch(err => {\n       console.log(err);\n       // message.warn(msg);\n       // notification.warn({\n       //      message: msg,\n       //      className : 'react-no-print'\n       // })\n    });\n//function\nfunction _urlMixPram(parm,url){\n    let _url=url;\n    for(let i in parm){\n        _url=_url.replace('{'+i+'}',parm[i]);\n    }\n    return _url;\n}\n/**\n * 公用post请求\n * @param url       接口地址\n * @param data      接口参数\n * @param msg       接口异常提示\n * @param headers   接口所需header配置\n */\nexport const post = ({url, data, msg = '接口异常', headers}) =>\n    axios.post(url, data, headers).then(res => res.data).catch(err => {\n        console.log(err);\n        // message.warn(msg);\n    });\n\n/**\n * 公用文件导出form请求\n * @param url       接口地址\n * @param data      接口参数\n */\n\nexport const postExport = ({url, data}) =>{\n    return new Promise((resolve,reject)=>{\n        window.open(markUrl(url,data));\n        return;\n        const iframe = document.createElement(\"iframe\");\n        iframe.setAttribute('id','iframe_display');\n        iframe.setAttribute('name','iframe_display');\n        iframe.setAttribute('style','display:none');\n        document.querySelector('.container').appendChild(iframe);\n        const form = document.createElement(\"form\");\n        form.setAttribute('id','form1123');\n        form.setAttribute('target','iframe_display');\n        form.setAttribute('method','post');\n        form.setAttribute('action',markUrl(url,data));\n        document.querySelector('.container').appendChild(form);\n        form.submit();\n        form.remove();\n        const parent = document.querySelector('.container');\n        const iframe1 = document.getElementById(\"iframe_display\");\n        setTimeout(()=>{\n            resolve({code:200})\n            removeElement(iframe1)\n        },300000)\n    })\n\n}\nfunction removeElement(_element){\n    var _parentElement = _element.parentNode;\n    if(_parentElement){\n        _parentElement.removeChild(_element);\n    }\n}\nfunction markUrl(link,data){\n    if (typeof data != \"undefined\" && data != \"\") {\n        var paramArr = [];\n        for (var attr in  data) {\n            paramArr.push(attr + '=' +  data[attr]);\n        }\n        link += '?' + paramArr.join('&');\n    }\n    return link;\n}\n"]},"metadata":{},"sourceType":"module"}